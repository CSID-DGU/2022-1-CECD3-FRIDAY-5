fear="\n               ê³µí¬ìŠ¤ëŸ¬ì›Œìš”.\n"
surprised="\n               ë†€ëì–´ìš”.\n"
anger="\n               í™”ë‚˜ìš”.\n"
sadness="\n               ìŠ¬í¼ìš”.\n"
neutrality=""
happiness="\n               í–‰ë³µí•´ìš”.\n"
disgust="\n               í˜ì˜¤ìŠ¤ëŸ¬ì›Œìš”.\n"


emoji_table = {"ğŸ˜±": fear,
              
               
               
               "ğŸ¤­": surprised, "ğŸ˜¨": surprised,"ğŸ™€": surprised,"â—_â—": surprised,
               "âŠ™_âŠ™": surprised,"O.o": surprised,"O-o": surprised,"ã…‡.ã…‡": surprised,
               "Oã…O": surprised,"Oå£o": surprised,"Oâ–¡o": surprised,"(à¹‘Â°ã…Â°à¹‘)â€¼": surprised,
               "(à¹‘âŠ™ï¾›âŠ™à¹‘)": surprised,"(à¹‘â€¢Ìoâ€¢Ì€à¹‘)": surprised,"ã„´ï¼ˆÂ°â–¡ã€‚ï¼‰ã„±": surprised,"ï¼¼(Âº â–¡ Âº l|l)/": surprised,
               "(â€³ãƒ­ã‚›)": surprised,"(;;;*_*)": surprised,"(ãƒ»äººãƒ»)": surprised,"ï¼¼(ã€‡_ï½)ï¼": surprised,
               "ã€œ(ï¼ï¼œ)ã€œ": surprised,"(((ï¼ï¼œ)))": surprised,"{{ (>_<) }}": surprised,"ã€£( ÂºÎ”Âº )ã€£": surprised,
               "ãƒ½(Â°.Â° )ï¾‰": surprised,"(Â°ãƒ­Â°)": surprised,"(o_O)": surprised,"(â—‹ï¼¡â—‹)": surprised,
               "( >ï¹<ã€‚)": surprised,"ï¼ˆï¿£â–¡ï¿£;)": surprised,"ãƒ½(*ã€‚>Ğ”<)oã‚œ": surprised,"(âŠ™_â˜‰)": surprised,
               "ï¼‹ã…ï¼‹ ": surprised,"Â±ã…Â±": surprised,"ã„´0o0ã„±": surprised,"ã„´O.oã„±": surprised,
               "ã„´Oã…0ã„±": surprised,"ã„´OAOã„±": surprised,
               
               
               
               "ğŸ¤¨": anger,"ğŸ˜¬": anger,"ğŸ˜¤": anger,"ğŸ˜¡": anger,
               "ğŸ‘¿": anger,"ğŸ¤¬": anger,"ğŸ˜ ": anger,"ğŸ˜¾": anger,
               "ã„±ã…¡": anger,"ã„±-": anger,"ã„±L-": anger,"(ï½€0Â´)": anger,
               "(à² ç›Šà² )": anger,"(âŠ™â–‚âŠ™)ğŸ’¢": anger,"(ï½€â–³Â´ï¼‹)": anger,"(+â“ª ç›Š â“ª)": anger,
               "(ğŸ’¢â“ª ç›Š â“ª)ğŸ’¢": anger,"(ğŸ’¢â—¥ ç›Š â—¤)": anger,"(â—£_â—¢ğŸ’¢)": anger,"(`AÂ´)": anger,
               "(â–½Ğ´â–½ï¼‰": anger,"(â‹‹â–‚â‹Œ)": anger,"(â™¯â–¼çš¿â–¼)": anger,"(Ê˜è¨€Ê˜+)": anger,
               "(ï½™ï¾Ÿ ç›Šï¾Ÿ;)ï½™": anger,"(â€¢Ë‹ã…ËŠâ€¢)": anger,
               
               
               
               "ğŸ¥²": sadness,"ğŸ˜”": sadness,"ğŸ˜•": sadness,"ğŸ¥º": sadness,
               "ğŸ˜": sadness,"ğŸ˜­": sadness,"ğŸ˜©": sadness,"ğŸ˜¢": sadness,
               "ğŸ™": sadness,"â˜¹": sadness,"ğŸ˜£": sadness,"ğŸ˜¿": sadness,
               "ã…œã…œ": sadness,"ã… ã… ": sadness,"ã…œ.ã…œ": sadness,"ã… .ã… ": sadness,
               "ã… _ã… ": sadness,"ã…œ_ã…œ": sadness,"ã… -ã… ": sadness,"ã…œ-ã…œ": sadness,
               "Tì˜¤T": sadness,"Tëª¨T": sadness,"Tì†ŒT": sadness,"ã…¡.ã…œ": sadness,
               "ã…œ.ã…¡": sadness,"T.T": sadness,"T_T": sadness,"TAT": sadness,
               "ã… ã…ã… ": sadness,"Tã…T": sadness,"( Ä¬ ^ Ä¬ )": sadness,"ÅÌ¥Ì¥Ì¥Ì¥×ÅÌ¥Ì¥Ì¥Ì¥": sadness,
               "( T Ê–Ì¯ T)": sadness,"(TâŒ“T)": sadness,"(ï½¡â€¢Ìï¸¿â€¢Ì€ï½¡)": sadness,"( ; Ï‰ ; )": sadness,
               "(ï½¡T Ï‰ Tï½¡)": sadness,"(Ï€ãƒ¼Ï€)": sadness,"(ï¼´â–½ï¼´)": sadness,"ã€’_ã€’": sadness,
               "(ä¸ª_ä¸ª)": sadness,
    
    
                "ğŸ˜€": happiness, "ğŸ˜‰": happiness,  "ğŸ˜": happiness,  "ğŸ˜†": happiness, 
                "ğŸ˜…": happiness,  "ğŸ˜‚": happiness,  "ğŸ¤£": happiness,  "ğŸ˜Š": happiness, 
                "ğŸ™‚": happiness,  "ğŸ˜„": happiness,  "ğŸ™ƒ": happiness,  "ğŸ˜‡": happiness, 
                "ğŸ˜ƒ": happiness,  "ğŸ˜š": happiness,  "ğŸ¥°": happiness,  "ğŸ˜™": happiness, 
                "â˜º": happiness,  "ğŸ˜": happiness,  "ğŸ˜›": happiness,  "ğŸ¤©": happiness, 
                "ğŸ˜‹": happiness,  "ğŸ˜": happiness,  "ğŸ¤—": happiness,  "ğŸ¥³": happiness, 
                "ğŸ¤ ": happiness,  "ğŸ˜½": happiness,  "ğŸ˜¸": happiness,  "ğŸ˜»": happiness, 
                "^_^": happiness,  "^-^": happiness,  "^ã…¡^": happiness,  "^V^": happiness,
               "^0^": happiness, "^ã…^": happiness,  "^ã…‡^": happiness,  "^â—¡^": happiness, 
                "^ì˜¤^": happiness,  "^ëª¨^": happiness,  "^â–½^": happiness,  "^~^": happiness, 
                "^U^": happiness,  "^3^": happiness,  "Ë˜â—¡Ë˜": happiness,  "'â—¡'": happiness, 
                ":-)": happiness,  ":)": happiness,  ":-â–·": happiness,  ":-D": happiness, 
                "X-D": happiness,  ":-P": happiness,  ":D": happiness,  "<( ^.^ )>": happiness, 
                "<(^_^<)": happiness,  "ï¼¼(^0^)/": happiness,  "â½â½â—( Ë™ ê’³ Ë™ )â—œâ¾â¾": happiness,  "à¹‘â€¢â€¿â€¢à¹‘": happiness, 
                "(âˆ—â›âŒ„â›âˆ—)": happiness,  "â—(â°â–¿â°)â—œ": happiness,  "(âœªê†šâœª)": happiness,  "â—‰â€¿â—‰": happiness,
               
              
              
              
              
              "ğŸ¤®": disgust, "ğŸ¤¢": disgust
              
              
              }




import requests
import re
from bs4 import BeautifulSoup
from urllib.parse import quote
from kiwipiepy import Kiwi
import pandas as pd
import numpy as np

separators = ".", "!","?","\n","\t","#"
# urllib.parse.quote()ëŠ” ì•„ìŠ¤í‚¤ì½”ë“œ í˜•ì‹ì´ ì•„ë‹Œ ê¸€ìë¥¼ URL ì¸ì½”ë”© ì‹œì¼œì¤ë‹ˆë‹¤.


temporary_list_for_csv = []
line_num = 0

# ë¬¸ì¥ ë‹¨ìœ„ë¡œ ìë¥´ê¸°
def split_sentence(blog_texts):
    global temporary_list_for_csv
    global line_num
    returnList=[]
    kiwi = Kiwi()

    for line in kiwi.split_into_sents(blog_texts):
        if len(line.text) < 10:
            continue
        line_num += 1
        
        
        
        #ë¬¸ì¥ì— í•œê¸€ ë¹„ì¤‘ì´ 70í¼ì„¼íŠ¸ ì´ˆê³¼ í¬í•¨ì¸ ê²½ìš°ë§Œ í¬ë¡¤ë§í•œë‹¤.
        #-> ë§í¬ì™€ ê°™ì€ ì˜ì–´ ë¬¸ì¥ì´ë‚˜ ì´ëª¨ì§€ í…Œì´ë¸”ì— í¬í•¨ë˜ì–´ ìˆì§€ ì•Šì•„ í•´ì„ ë¶ˆê°€ëŠ¥í•œ ì´ëª¨í‹°ì½˜ì´ í¬í•¨ëœ ë¬¸ì¥ì„ ì œê±°
        korean_p = re.compile('[ã„±-ã…|ã…-ã…£|ê°€-í£|\s]+')
        korean_count=0
        
        for t in line.text:
            if(korean_p.match(t)):
                korean_count+=1

        korean_ratio=korean_count/len(line.text)
        if(korean_ratio>0.7):
            returnList.append(line.text)
        else:
            print("í•œê¸€ ë¹„ì¤‘ì´ 70% ì´í•˜ì…ë‹ˆë‹¤.")
            print(line.text)
    return returnList

# í…ìŠ¤íŠ¸ ì „ì²˜ë¦¬
# ì§€ê¸ˆì€ ì´ëª¨í‹°ì½˜ ì¹˜í™˜ë§Œ
def preprocess_sentence_kr(text):
    text = emoji_substitution(text)

    return text

# zero width space ì œê±° 
def remove_zero_width_space(w):
    w = w.strip()
    w = re.sub(r"[^0-9ê°€-í£?.!,Â¿]+", " ", w) # \në„ ê³µë°±ìœ¼ë¡œ ëŒ€ì²´í•´ì¤Œ
    w = w.strip()
    return w

# ì´ëª¨í‹°ì½˜ ì¹˜í™˜
def emoji_substitution(blog_texts):
    for key in emoji_table.keys():
        if key in blog_texts:
            blog_texts = blog_texts.replace(key,emoji_table[key])
    
    return blog_texts
    

# ì—¬ëŸ¬ êµ¬ë¶„ì ì‚¬ìš© ê°€ëŠ¥í•˜ê²Œ í•´ì£¼ëŠ” í•¨ìˆ˜
def custom_split(sepr_list, str_to_split):
    # create regular expression dynamically
    regular_exp = '|'.join(map(re.escape, sepr_list))
    return re.split(regular_exp, str_to_split)


def Diary_split(diary_text)
    diary_text = preprocess_sentence_kr(diary_text) # í…ìŠ¤íŠ¸ ì „ì²˜ë¦¬
    returnList=split_sentence(diary_text)
    return returnList

